import { type CreateListenerOptions, type DialOptions, transportSymbol, type Transport, type Listener, type Upgrader, type ComponentLogger, type Connection, type PeerId, type CounterGroup, type Metrics, type Startable } from '@libp2p/interface';
import { type Multiaddr } from '@multiformats/multiaddr';
import type { DataChannelOptions } from '../index.js';
import type { IncomingStreamData, Registrar, ConnectionManager, TransportManager } from '@libp2p/interface-internal';
export declare const SIGNALING_PROTO_ID = "/webrtc-signaling/0.0.1";
export interface WebRTCTransportInit {
    rtcConfiguration?: RTCConfiguration;
    dataChannel?: DataChannelOptions;
    /**
     * Inbound connections must complete the upgrade within this many ms
     * (default: 30s)
     */
    inboundConnectionTimeout?: number;
}
export interface WebRTCTransportComponents {
    peerId: PeerId;
    registrar: Registrar;
    upgrader: Upgrader;
    transportManager: TransportManager;
    connectionManager: ConnectionManager;
    metrics?: Metrics;
    logger: ComponentLogger;
}
export interface WebRTCTransportMetrics {
    dialerEvents: CounterGroup;
    listenerEvents: CounterGroup;
}
export declare class WebRTCTransport implements Transport, Startable {
    private readonly components;
    private readonly init;
    private readonly log;
    private _started;
    private readonly metrics?;
    private readonly shutdownController;
    constructor(components: WebRTCTransportComponents, init?: WebRTCTransportInit);
    isStarted(): boolean;
    start(): Promise<void>;
    stop(): Promise<void>;
    createListener(options: CreateListenerOptions): Listener;
    readonly [Symbol.toStringTag] = "@libp2p/webrtc";
    readonly [transportSymbol] = true;
    filter(multiaddrs: Multiaddr[]): Multiaddr[];
    dial(ma: Multiaddr, options: DialOptions): Promise<Connection>;
    _onProtocol({ connection, stream }: IncomingStreamData): Promise<void>;
    private _closeOnShutdown;
}
export declare function splitAddr(ma: Multiaddr): {
    baseAddr: Multiaddr;
    peerId: PeerId;
};
//# sourceMappingURL=transport.d.ts.map